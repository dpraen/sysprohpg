var nURL="https://nero.live/dmp/n";var YAP_COOKIE_NAME="nId";var YAP_COOKIE_EXP="nX";var BK_COOKIE_NAME="nBk";var ONE_YEAR=8760*60*60;var SYNC_FREQ=7;var DAY_MS=1e3*60*60*24;var DOMAIN=".nero.live";var SECURE=true;var originWhiteList={"dailymaverick.co.za":true,"news.roscoe-games.com":true,"tshwi-fi.co.za":true,"thesouthafrican.com":true,"biznews.com":true,"enca.com":true,"mambaonline.co.za":true,"groundup.org.za":true,"roodepoortrecord.co.za":true,"vaalweekblad.com":true,"lowvelder.co.za":true,"rekordeast.co.za":true,"rekordcenturion.co.za":true,"northcoastcourier.co.za":true,"southcoastherald.co.za":true,"northglennews.co.za":true,"reviewonline.co.za":true,"risingsunoverport.co.za":true,"randburgsun.co.za":true,"highwaymail.co.za":true,"krugersdorpnews.co.za":true,"zululandobserver.co.za":true,"mobserver.co.za":true,"witbanknews.co.za":true,"kemptonexpress.co.za":true,"letabaherald.co.za":true,"risingsunchatsworth.co.za":true,"albertonrecord.co.za":true,"heidelbergnigelheraut.co.za":true,"georgeherald.com":true,"randfonteinherald.co.za":true,"rekordmoot.co.za":true,"rekordnorth.co.za":true,"sandtonchronicle.co.za":true,"benonicitytimes.co.za":true,"mosselbayadvertiser.com":true,"mpumalanganews.co.za":true,"ridgetimes.co.za":true,"sedibengster.com":true,"germistoncitynews.co.za":true,"brakpanherald.co.za":true,"bloemfonteincourant.co.za":true,"boksburgadvertiser.co.za":true,"steelburgernews.co.za":true,"bedfordviewedenvalenews.co.za":true,"northcliffmelvilletimes.co.za":true,"fourwaysreview.co.za":true,"knysnaplettherald.com":true,"potchefstroomherald.co.za":true,"roodepoortnorthsider.co.za":true,"ladysmithgazette.co.za":true,"bereamail.co.za":true,"newcastleadvertiser.co.za":true,"oudtshoorncourant.com":true,"southcoastsun.co.za":true,"midrandreporter.co.za":true,"springsadvertiser.co.za":true,"kormorant.co.za":true,"suidkaapforum.com":true,"eyethunews.co.za":true,"capricornreview.co.za":true,"southlandssun.co.za":true,"comarochronicle.co.za":true,"southerncourier.co.za":true,"rosebankkillarneygazette.co.za":true,"whiteriverpost.co.za":true,"standertonadvertiser.co.za":true,"northernnatalcourier.co.za":true,"vryheidherald.co.za":true,"sowetourban.co.za":true,"risingsunlenasia.co.za":true,"alexnews.co.za":true,"parysgazette.co.za":true,"phoenixsun.co.za":true,"tembisan.co.za":true,"highvelder.co.za":true,"northeasterntribune.co.za":true,"africanreporter.co.za":true,"estcourtnews.co.za":true,"carletonvilleherald.com":true,"corridorgazette.co.za":true,"joburgeastexpress.co.za":true,"maritzburgsun.co.za":true,"citybuzz.co.za":true,"publiceyemaritzburg.co.za":true,"westside-eldos.co.za":true,"nelspruitpost.co.za":true,"barbertontimes.co.za":true,"hazyviewherald.co.za":true,"kathorusmail.co.za":true,"bona.co.za":true,"rooirose.co.za":true,"peoplemagazine.co.za":true,"essentials.co.za":true,"farmersweekly.co.za":true,"livingandloving.co.za":true,"countrylife.co.za":true,"gardenandhome.co.za":true,"womanandhomemagazine.co.za":true,"yourfamily.co.za":true,"foodandhome.co.za":true,"caxtonmags.co.za":true,"vrouekeur.co.za":true,"guzzle.co.za":true,"all4women.co.za":true,"sharenet.co.za":true,"roodepoortrecord.dev.sites.caxton.co.za":true,"adbreaks.net":true,"syspro.com":true,"partner.syspro.com":true,"za.syspro.com":true,"benchmark.digital":true,"ashburtoninvestments.com":true,"flightcentre.co.za":true,"flightcentre.com.na":true,"cruiseabout.co.za":true,"flightcentrebusinesstravel.co.za":true,"flightcentrecareers.co.za":true,"mg.co.za":true,"bestofzululand.co.za":true,"bestofbloemfontein.co.za":true,"bestofekurhuleni.co.za":true,"bestofmbombela.co.za":true,"bestofpretoria.co.za":true,"bestofjoburg.co.za":true,"sabreakingnews.co.za":true,"sapeople.com":true,"indianspice.co.za":true,"prasa.com":true,"algoafm.co.za":true,"ofm.co.za":true,"citizen.co.za":true,"midsouthcoastrisingsun.co.za":true,"autodealer.co.za":true,"biz.hozi.co.za":true,"healthspas.co.za":true,"datingsa.com":true,"datingplace.co.za":true,"getaway.co.za":true,"carmag.co.za":true,"popularmechanics.co.za":true,"leisurewheels.co.za":true,"toyotazone.co.za":true,"moneyweb.co.za":true,"today.moneyweb.co.za":true,"homes.hozi.co.za":true,"specials.hozi.co.za":true,"phonefinder.co.za":true,"monaghanfarm.co.za":true,"jackalcreek.co.za":true,"alllife.co.za":true,"cashcrusaders.co.za":true,"tysflo.com":true,"universityworldnews.com":true,"thezimbabwean.co":true,"hot919fm.com":true,"timeslive.co.za":true,"sowetanlive.co.za":true,"businesslive.co.za":true,"sundayworld.co.za":true,"heraldlive.co.za":true,"dispatchlive.co.za":true,"sahomeowner.co.za":true,"thehomechannel.co.za":true,"businessdaytv.co.za":true,"ignitionlive.co.za":true,"app.mobepro.com":true,"mobepro.com":true};function getfqdn(url){if(!url){return null}var domain;if(url.indexOf("://")>-1){domain=url.split("/")[2]}else{domain=url.split("/")[0]}domain=domain.split(":")[0];if(domain.indexOf("www.")==0||domain.indexOf("WWW.")==0){domain=domain.substring(4)}return domain}function checkWhiteList(origin){var fqdn=getfqdn(origin);return originWhiteList[fqdn]===true}var msSinceEpoch=(new Date).getTime();var daysSinceEpoch=Math.round(msSinceEpoch/DAY_MS);var __globalNId=null;function getOrCreateNId(){var nId=__globalNId;if(!nId){if(docCookies.hasItem(YAP_COOKIE_NAME)){nId=docCookies.getItem(YAP_COOKIE_NAME);if(!docCookies.hasItem(YAP_COOKIE_EXP)){docCookies.setItem(YAP_COOKIE_EXP,msSinceEpoch,ONE_YEAR,"/",DOMAIN,SECURE)}}else{nId=createGuid();docCookies.setItem(YAP_COOKIE_EXP,msSinceEpoch,ONE_YEAR,"/",DOMAIN,SECURE)}docCookies.setItem(YAP_COOKIE_NAME,nId,ONE_YEAR,"/",DOMAIN,SECURE);nId=docCookies.getItem(YAP_COOKIE_NAME);if(cId){var nX=docCookies.hasItem(YAP_COOKIE_EXP)?docCookies.getItem(YAP_COOKIE_EXP):Infinity;if(!nId||cIdAge<nX){nId=cId;docCookies.setItem(YAP_COOKIE_NAME,nId,ONE_YEAR,"/",DOMAIN,SECURE);docCookies.setItem(YAP_COOKIE_EXP,cIdAge,ONE_YEAR,"/",DOMAIN,SECURE)}}__globalNId=nId}return nId}function postUserData(msg,origin,parent){var nId=getOrCreateNId();if(!nId){return}var pos=msg.pos;var coords=pos==null?null:{latitude:pos.lat,longitude:pos.lon,accuracy:pos.acc};var userData={nId:nId,position:{supplier:"user",site:origin,page:msg.page,coords:coords}};var xhr=new XMLHttpRequest;xhr.open("POST",nURL,true);xhr.withCredentials=true;xhr.setRequestHeader("Content-Type","application/json; charset=UTF-8");xhr.send(JSON.stringify(userData));parent.postMessage(nId,origin)}function doSync(){if(!docCookies.hasItem(BK_COOKIE_NAME)){return true}else{var nBK=docCookies.getItem(BK_COOKIE_NAME);return daysSinceEpoch-nBK>=SYNC_FREQ}}function bk_sync(msg,origin,parent){var nId=getOrCreateNId();if(nId){var bk_uuid=msg.bk_uuid;var xhr=new XMLHttpRequest;xhr.open("POST","https://nero.live/dmp/bk",true);xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");xhr.send("bk_uuid="+bk_uuid+"&nId="+nId+"&site="+origin);parent.postMessage(nId,origin);docCookies.setItem(BK_COOKIE_NAME,daysSinceEpoch,ONE_YEAR,"/",DOMAIN,SECURE)}}window.addEventListener("message",receiveMessage,false);function receiveMessage(event){var origin=event.origin||event.originalEvent.origin;if(checkWhiteList(origin)){if(event.data.msg_type=="POS"){postUserData(event.data,origin,event.source)}else if(event.data.msg_type=="BK"){bk_sync(event.data,origin,event.source)}}}var docCookies={getItem:function(sKey){if(!sKey){return null}return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(sKey,sValue,vEnd,sPath,sDomain,bSecure){if(!sKey||/^(?:expires|max\-age|path|domain|secure)$/i.test(sKey)){return false}var sExpires="";if(vEnd){switch(vEnd.constructor){case Number:sExpires=vEnd===Infinity?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+vEnd;break;case String:sExpires="; expires="+vEnd;break;case Date:sExpires="; expires="+vEnd.toUTCString();break}}document.cookie=encodeURIComponent(sKey)+"="+encodeURIComponent(sValue)+sExpires+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:"")+(bSecure?"; secure":"");return true},removeItem:function(sKey,sPath,sDomain){if(!this.hasItem(sKey)){return false}document.cookie=encodeURIComponent(sKey)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:"");return true},hasItem:function(sKey){if(!sKey){return false}return new RegExp("(?:^|;\\s*)"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){var aKeys=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);for(var nLen=aKeys.length,nIdx=0;nIdx<nLen;nIdx++){aKeys[nIdx]=decodeURIComponent(aKeys[nIdx])}return aKeys}};createGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=Math.random()*16|0,v=c==="x"?r:r&3|8;return v.toString(16)})};